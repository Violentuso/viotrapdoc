---
title: Механики
sidebar_position: 2
---

Здесь мы рассмотрим основные и неочевидные механики трапок и пластов.

### Схематики

Плагин использует систему схематик из WorldEdit. Это значит, что для создания схематик вам нужны базовые знания WorldEdit.

Если вы ничего не знаете про механику схематик WorldEdit, то читайте подробнее в [Создание схематик](/docs/viotrap/guides/schematic-guide.mdx). В этом гайде подробно разбирается создание схематик как для трапок, так и для пластов.

:::info

В отличии от большенства других плагинов, пласты в нашем плагине имеют все виды схематик.

:::

### Регионы

Регионы работают на плагине WorldGuard. Названия регионов трапок генерируются по принципу [ник игрока]_trap_координаты.
Пример:

```
violentuso_trap_43_138_-69
```
Названия регионов пластов имеют более простую генерацию. Пример:

```
plate_violentuso
```

Регионы имеют приоритет 52. Это будет важно если вам нужно включить использование трапок на пвп-арене.

Флаги регионов можно настроить в конфигурации предметов. Там же вы можете настроить регионы где нельзя будет использовать трапку или пласт. Читайте подробнее в [Основная конфигурация](/docs/viotrap/viotrap-page1.md).

:::warning 

Из-за старой механики работы схематик и регионов игроки не могут ставить трапки и пласты рядом с трапками и пластами других игроков. Позже это будет исправлено.

:::

### Активные трапки и пласты

В папке плагина вы могли найти файлы trap.yml и plats.yml. Эти файлы отвечают за активные трапки и пласты установлены в данный момент.
Так же в этих файлах прописаны активные кулдауны для игроков, что бы предотворить абуз с перезадохом.

При перезагрузке сервера все активные трапки и пласты удаляются, как и их регионы. 

При 150-250 онлайна активные трапки и пласты сьедают память сервера небольше чем другие плагины, как и нагружают его.

### Скины

Скины являются одним из самых главных преимуществ плагина, которого нет в других. В VioTrap вы легко сможете создать скин в удобном GUI меню.

В плагине уже предосмотрена система скин-поинтов и листочков, что бы вы не тратили своё время на реализацию этого с помощью других плагинов.

Подробнее про создание скинов, их механики и прочее читайте в [Скины](/docs/viotrap/items/hard-items/skins.md).

### Действия(Actions)

Действия(Actions) - это уникальная механика для трапок. Здесь вы сможете настроить эффекты, комманды и другие фишки, которые будут применятся при применении трапки.

#### Список действий на патч v1.1.2

<b>Телепортиция</b> - телепортирует таргет вверх на определённое количество блоков.

<b>Команда</b> - вызывает комманду. Может вызвать комманду относительно таргета.

<b>Эффект</b> - выдаёт эффект на таргет. 

<b>Партикл хитбокс</b> - Спавнить вокруг таргета партиклы ввиде его хитбокса.

<b>Запрет предметов</b> - запрещает использование предметов в трапке.

:::info
Запрет предметов распространяется не только на игроков которые находились внутри трапки в момент её применения, а и на тех игроков, которые зашли в неё во время действия трапки.
:::

:::warning

Запрет не работает на тотем бессмертия и фейерверк. Этот баг будет пофикшен позже с удалением этого предупреждения.

:::

<b>Кулдаун предметов</b> - устанавливает кулдаун на предметы для игроков, которые попали в трапку.

:::info
Кулдаун предметов распространяется ТОЛЬКО на игроков, которые были в трапке в момент её применения.

Кулдаун предметов не будет работать если на игроке уже весит кулдаун на данный предмет(-ы).(Работает только если на игроке весит ванильный кулдаун). 
:::

В будующем планируется добавление ещё большего количества действий.

#### Таргеты

Таргеты - это игроки, на которых будут применятся действия. В плагине есть 3 вида таргетов.

<b>p</b> - Игрок, применяющий трапку.

<b>o</b> - Все игроки, попавшие в трапку на момент применения.

<b>rp</b> - Рандомный игрок попавший в трапку на момент применения.

### NEW Условия(Conditions)

Условия(Conditions) - это условия, при которых можно будет использовать предмет.

Настроить условия вы можете прописав /viotrap conditions.

В меню вы сможете выбрать предмет, а к нему уже условие(или несколько).

После этого вы сразу сможете проверить их работоспособность без перезапуска плагина или сервера.

#### Список условий на момент патча v1.1.2

<b>Пермишен</b> - Имеет ли игрок определённое право для использования.  

<b>Блок снизу</b> - Стоит ли игрок на определённом блоке. 

<b>Шифт</b> - Сидит или не сидит игрок на шифте.

<b>Минимальное хп</b> - Имеет ли игрок больше чем X хп.

<b>Режим игры</b> - Игрок в креативе, виживании, спектаторе или в режиме приключений. 

<b>Предмет в левой руке</b> - Имеет ли игрок определённый предмет в левой руке(Позже добавится возможность добавлять касмтоные предметы).

<b>Регион</b> - Стоит или не стоит игрок в определённом регионе(В целом можно сделать при помощи обычных настроек, но вдруг можно будет с этим что-то придумать).

<b>Эффект</b> - Имеет или не имеет ли игрок определённый эффект определённого уровня. 

<b>Биом</b> - Находится или не находится ли игрок в определённом биоме. 

<b>Плаванье</b> - Игрок плывёт или не плывёт.  



#### Настройка сообщений для условий

В конфиге вы сможете настроить как сами условия, так и их сообщения.

В сообщениях была добавлена новая механика type.

Теперь вы сможете выбрать тип сообщения, а точнее куда оно отправится.

Существует 4 типа - chat, actionbar, title, subtitle.
